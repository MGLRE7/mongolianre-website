<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Connection Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        .container {
            text-align: center;
            padding: 40px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 2em;
        }
        #status {
            font-size: 1.2em;
            font-weight: bold;
            padding: 10px;
            border-radius: 6px;
        }
        .success {
            color: #28a745;
            background-color: #e9f7ec;
        }
        .failure {
            color: #dc3545;
            background-color: #fbebed;
        }
        .pending {
            color: #6c757d;
            background-color: #f8f9fa;
        }
    </style>
    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <h1>Testing Supabase Connection...</h1>
        <p id="status" class="pending">Attempting to connect...</p>
    </div>

    <script>
        // These variables will be provided by Netlify's build process.
        // We need to create a simple script to pass them from the build to the browser.
        const SUPABASE_URL = '%SUPABASE_URL%';
        const SUPABASE_ANON_KEY = '%SUPABASE_ANON_KEY%';

        const statusElement = document.getElementById('status' );

        try {
            // Check if the placeholder values have been replaced.
            if (SUPABASE_URL.startsWith('%') || SUPABASE_ANON_KEY.startsWith('%')) {
                throw new Error("Environment variables not replaced by Netlify. Check netlify.toml.");
            }

            // Initialize the Supabase client
            const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

            // If the client initializes without error, the connection is successful.
            console.log('Supabase client initialized:', supabase);
            statusElement.textContent = '✅ Successfully connected to Supabase!';
            statusElement.className = 'success';

        } catch (error) {
            console.error('Supabase connection failed:', error);
            statusElement.textContent = `❌ Connection Failed: ${error.message}`;
            statusElement.className = 'failure';
        }
    </script>
</body>
</html>
